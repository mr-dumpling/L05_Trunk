Index: vendor/branch/5058A_Telcel/vendor/mediatek/proprietary/packages/apps/Stk/res/values-es/strings.xml
===================================================================
--- vendor/branch/5058A_Telcel/vendor/mediatek/proprietary/packages/apps/Stk/res/values-es/strings.xml	(revision 3696)
+++ vendor/branch/5058A_Telcel/vendor/mediatek/proprietary/packages/apps/Stk/res/values-es/strings.xml	(revision 3697)
@@ -1,91 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<!-- Copyright (C) 2009 The Android Open Source Project
-
-     Licensed under the Apache License, Version 2.0 (the "License");
-     you may not use this file except in compliance with the License.
-     You may obtain a copy of the License at
-
-          http://www.apache.org/licenses/LICENSE-2.0
-
-     Unless required by applicable law or agreed to in writing, software
-     distributed under the License is distributed on an "AS IS" BASIS,
-     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-     See the License for the specific language governing permissions and
-     limitations under the License.
--->
-<resources xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
-    <string name="app_name">"SIM Telcel"</string>
-    <string name="appI_name">Kit de herramientas SIM1</string>
-    <string name="appII_name">Kit de herramientas SIM2</string>
-    <string name="appIII_name">Kit de herramientas SIM3</string>
-    <string name="appIV_name">Kit de herramientas SIM4</string>
-    <string name="lable_not_available">La aplicación no está instalada</string>
-    <string name="menu_end_session">"Finalizar sesión"</string>
-    <string name="help">"Ayuda"</string>
-    <string name="menu_back">"Anterior"</string>
-    <string name="service_name">"Nombre de servicio"</string>
-    <string name="stk_no_service">"Ningún servicio disponible"</string>
-    <string name="button_ok">"Aceptar"</string>
-    <string name="button_cancel">"Cancelar"</string>
-    <string name="button_yes">"Sí"</string>
-    <string name="button_no">"No"</string>
-    <string name="alphabet">"Caracteres alfabéticos"</string>
-    <string name="digits">"Caracteres numéricos (0-9, *, #, +)"</string>
-    <string name="default_call_setup_msg">"Llamada en curso..."</string>
-    <string name="stk_app_state">"Estado de la aplicación"</string>
-    <string name="enable_app">"Habilitado"</string>
-    <string name="disable_app">"Inhabilitado"</string>
-    <string name="lable_display_text">Mostrar texto</string>
-    <string name="lable_get_inkey">Obtener tecla de entrada</string>
-    <string name="lable_get_input">Obtener entrada</string>
-    <string name="lable_launch_browser">Iniciar el explorador</string>
-    <string name="lable_play_tone">Reproducir tono</string>
-    <string name="lable_refresh">Actualizar</string>
-    <string name="lable_select_item">Seleccionar elemento</string>
-    <string name="lable_send_ss">Enviar SS</string>
-    <string name="lable_send_ussd">Enviar USSD</string>
-    <string name="lable_send_sms">Enviar SMS</string>
-    <string name="lable_send_dtmf">Enviar DTMF</string>
-    <string name="lable_setup_event_list">Configurar lista de eventos</string>
-    <string name="lable_setup_idle_modetext">Configurar texto para modo de inactividad</string>
-    <string name="lable_setup_menu">Configurar menú</string>
-    <string name="lable_setup_call">Configurar llamada</string>
-    <string name="lable_more_time">Más tiempo</string>
-    <string name="lable_poll_interval">Intervalo de sondeo</string>
-    <string name="lable_polling_off">Sondeo desactivado</string>
-    <string name="lable_provide_local_information">Proporcionar información local</string>
-    <string name="lable_timer_management">Administración del temporizador</string>
-    <string name="lable_perform_card_apdu">Ejecutar tarjeta APDU</string>
-    <string name="lable_power_on_card">Conectar tarjeta</string>
-    <string name="lable_power_off_card">Desconectar tarjeta</string>
-    <string name="lable_get_reader_status">Obtener estado del lector</string>
-    <string name="lable_run_at_command">Ejecutar comando AT</string>
-    <string name="lable_language_notification">Notificación de idioma</string>
-    <string name="lable_open_channel">Abrir canal</string>
-    <string name="lable_close_channel">Cerrar canal</string>
-    <string name="lable_receive_data">Recibir datos</string>
-    <string name="lable_send_data">Enviar datos</string>
-    <string name="lable_get_channel_status">Obtener estado del canal</string>
-    <string name="lable_service_search">Buscar servicio</string>
-    <string name="lable_get_service_information">Obtener información del servicio</string>
-    <string name="lable_declare_service">Declarar servicio</string>
-    <string name="lable_set_frame">Establecer trama</string>
-    <string name="lable_get_frame_status">Obtener estado de la trama</string>
-    <string name="lable_retrieve_multimedia_message">Recuperar mensaje multimedia</string>
-    <string name="lable_submit_multimedia_message">Enviar mensaje multimedia</string>
-    <string name="lable_display_multimedia_message">Mostrar mensaje multimedia</string>
-    <string name="lable_activate">Activar</string>
-    <string name="action_launch_browser">Iniciar el explorador</string>
-    <string name="action_setup_call">Llamar</string>
-    <string name="lable_busy_on_bip">La aplicación está ocupada en comandos BIP. Inténtelo más tarde.</string>
-    <string name="main_menu_not_initialized">Menú principal no inicializado</string>
-    <string name="lable_busy_on_call">El teléfono está ocupado en una llamada. Finalice primero dicha llamada.</string>
-    <string name="lable_on_flight_mode">No se puede iniciar el Kit de herramientas SIM porque el modo de avión está activado.</string>
-    <string name="lable_sim_not_ready">El Kit de herramientas SIM no está preparado o no se admite.</string>
-    <string name="no_sim_card_inserted">Inserte la tarjeta SIM para iniciar el Kit de herramientas SIM.</string>
-    <string name="stk_dialog_title">KitdeherramientasdeSIM</string>
-    <string name="default_open_channel_msg">"¿Abrir canal?"</string>
-    <string name="stk_dialog_accept">"Sí"</string>
-    <string name="stk_dialog_reject">"No"</string>
-</resources>
Index: vendor/branch/5058A_Telcel/vendor/mediatek/proprietary/packages/apps/Stk/res/values/strings.xml
===================================================================
--- vendor/branch/5058A_Telcel/vendor/mediatek/proprietary/packages/apps/Stk/res/values/strings.xml	(revision 3696)
+++ vendor/branch/5058A_Telcel/vendor/mediatek/proprietary/packages/apps/Stk/res/values/strings.xml	(revision 3697)
@@ -1,111 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<!-- Copyright (C) 2007 The Android Open Source Project
-
-     Licensed under the Apache License, Version 2.0 (the "License");
-     you may not use this file except in compliance with the License.
-     You may obtain a copy of the License at
-
-          http://www.apache.org/licenses/LICENSE-2.0
-
-     Unless required by applicable law or agreed to in writing, software
-     distributed under the License is distributed on an "AS IS" BASIS,
-     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-     See the License for the specific language governing permissions and
-     limitations under the License.
--->
-
-<resources xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
-    <!-- Default Application label used on home screen with an icon -->
-    <string name="app_name">SIM Telcel</string>
-    <string name="appI_name">SIM1 Toolkit</string>
-    <string name="appII_name">SIM2 Toolkit</string>
-    <string name="appIII_name">SIM3 Toolkit</string>
-    <string name="appIV_name">SIMI4 Toolkit</string>
-    <string name="lable_not_available">App isn\'t installed</string>
-    <!-- Menu button option for ending current SIM session -->
-    <string name="menu_end_session">End session</string>
-    <!-- Menu button option for requesting additional help information -->
-    <string name="help">Help</string>
-    <!-- Menu button option to navigate back to the previous screen -->
-    <string name="menu_back">Back</string>
-    <!-- Settings entry which describes the current SIM Toolkit service on the device -->
-    <string name="service_name">Service name</string>
-    <!-- Default description for service_name when no STK service is available -->
-    <string name="stk_no_service">No service available</string>
-    <!-- OK button used to confirm a message dialog -->
-    <string name="button_ok">OK</string>
-    <!-- Cancel button used to dismiss a message dialog and terminate the current SIM session-->
-    <string name="button_cancel">Cancel</string>
-    <!-- Yes button, used on a Yes/No confirmation screen -->
-    <string name="button_yes">Yes</string>
-    <!-- No button, used on a Yes/No confirmation screen -->
-    <string name="button_no">No</string>
-    <!-- Description for the type of text allowed in a form: alphanumeric or digits only -->
-    <string name="alphabet">Characters</string>
-    <!-- Type of alphabet text allowed in a form: 0-9, *, #, + characters only -->
-    <string name="digits">Digits (0-9, *, #, +)</string>
-    <!-- Default transition message when launching a call -->
-    <string name="default_call_setup_msg">Call in progress\u2026</string>
-
-    <string name="stk_app_state">Application state</string>
-    <string name="enable_app">Enabled</string>
-    <string name="disable_app">Disabled</string>
-    <string name="lable_display_text">Display text</string>
-    <string name="lable_get_inkey">Get inkey</string>
-    <string name="lable_get_input">Get input</string>
-    <string name="lable_launch_browser">Launch Browser</string>
-    <string name="lable_play_tone">Play tone</string>
-    <string name="lable_refresh">Refresh</string>
-    <string name="lable_select_item">Select item</string>
-    <string name="lable_send_ss">Send SS</string>
-    <string name="lable_send_ussd">Send USSD</string>
-    <string name="lable_send_sms">Send SMS</string>
-    <string name="lable_send_dtmf">Send DTMF</string>
-    <string name="lable_setup_event_list">Set up event list</string>
-    <string name="lable_setup_idle_modetext">Set up idle mode text</string>
-    <string name="lable_setup_menu">Set up menu</string>
-    <string name="lable_setup_call">Set Up Call</string>
-    <string name="lable_more_time">More time</string>
-    <string name="lable_poll_interval">Poll interval</string>
-    <string name="lable_polling_off">Polling off</string>
-    <string name="lable_provide_local_information">Provide Local Information</string>
-    <string name="lable_timer_management">Timer management</string>
-    <string name="lable_perform_card_apdu">perform card APDU</string>
-    <string name="lable_power_on_card">Power on card</string>
-    <string name="lable_power_off_card">Power off card</string>
-    <string name="lable_get_reader_status">Get reader status</string>
-    <string name="lable_run_at_command">Run AT command</string>
-    <string name="lable_language_notification">Language notification</string>
-    <string name="lable_open_channel">Open channel</string>
-    <string name="lable_close_channel">Close channel</string>
-    <string name="lable_receive_data">Receive data</string>
-    <string name="lable_send_data">Send data</string>
-    <string name="lable_get_channel_status">Get channel status</string>
-    <string name="lable_service_search">Service search</string>
-    <string name="lable_get_service_information">Get service information</string>
-    <string name="lable_declare_service">Declare service</string>
-    <string name="lable_set_frame">Set frame</string>
-    <string name="lable_get_frame_status">Get frame status</string>
-    <string name="lable_retrieve_multimedia_message">Retrieve multimedia message</string>
-    <string name="lable_submit_multimedia_message">Submit multimedia message</string>
-    <string name="lable_display_multimedia_message">Display multimedia message</string>
-    <string name="lable_activate">Activate</string>
-    <string name="action_launch_browser">Launch browser</string>
-    <string name="action_setup_call">Dial</string>
-    <string name="lable_busy_on_bip">App is busy on BIP commands, please try again later.</string>
-    <string name="main_menu_not_initialized">Main menu is not initialized</string>
-    <string name="lable_busy_on_call">The phone is busy on call, please finish the call first</string>
-    <string name="lable_on_flight_mode">Unable to launch SIM Toolkit since airplane mode is on.</string>
-    <string name="lable_sim_not_ready">SIM Toolkit is not ready or unsupported</string>
-    <string name="no_sim_card_inserted">Please insert SIM to launch SIM Toolkit.</string>
-
-    <!-- Title text used for system dialog from STK app -->
-    <string name="stk_dialog_title">SIM ToolKit</string>
-    <!-- Default message when no alpha in OPEN_CHANNEL -->
-    <string name="default_open_channel_msg">Open Channel?</string>
-    <!-- Button texts used in STK dialog -->
-    <string name="stk_dialog_accept">YES</string>
-    <string name="stk_dialog_reject">NO</string>
-    <string name="sim_switch">This service is only available with China Unicom SIM. Set &lt;<xliff:g>%s</xliff:g>&gt; as default data SIM?</string>
-</resources>
Index: vendor/branch/5058A_Telcel/vendor/mediatek/proprietary/packages/apps/Stk/AndroidManifest.xml
===================================================================
--- vendor/branch/5058A_Telcel/vendor/mediatek/proprietary/packages/apps/Stk/AndroidManifest.xml	(revision 0)
+++ vendor/branch/5058A_Telcel/vendor/mediatek/proprietary/packages/apps/Stk/AndroidManifest.xml	(revision 3697)
@@ -0,0 +1,139 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!-- Copyright (C) 2007 The Android Open Source Project
+
+     Licensed under the Apache License, Version 2.0 (the "License");
+     you may not use this file except in compliance with the License.
+     You may obtain a copy of the License at
+
+          http://www.apache.org/licenses/LICENSE-2.0
+
+     Unless required by applicable law or agreed to in writing, software
+     distributed under the License is distributed on an "AS IS" BASIS,
+     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+     See the License for the specific language governing permissions and
+     limitations under the License.
+-->
+
+
+<manifest xmlns:android="http://schemas.android.com/apk/res/android"
+        xmlns:androidprv="http://schemas.android.com/apk/prv/res/android"
+        package="com.android.stk"
+        android:sharedUserId="android.uid.phone">
+
+    <original-package android:name="com.android.stk" />
+
+    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
+    <uses-permission android:name="android.permission.GET_TASKS" />
+    <uses-permission android:name="android.permission.RECEIVE_STK_COMMANDS" />
+    <uses-permission android:name="android.permission.INTERACT_ACROSS_USER_FULL" />
+    <uses-permission android:name="android.permission.READ_PRIVILEGED_PHONE_STATE" />
+    <protected-broadcast android:name="android.intent.action.RESET_MAIN_ACCESS" />
+    <protected-broadcast android:name="android.stkDialog.TIMEOUT" />
+
+    <application android:icon="@drawable/ic_launcher_sim_toolkit"
+        android:label="@string/app_name_telcel"
+        android:clearTaskOnLaunch="true"
+        android:process="com.android.phone"
+        android:taskAffinity="android.task.stk">
+
+        <activity android:name=".StkMain"
+            android:theme="@android:style/Theme.Translucent.NoTitleBar"
+            android:configChanges="orientation"
+            android:label="@string/app_name"
+            android:enabled="false"
+            android:exported="true"
+            android:taskAffinity="android.task.stk.task">
+            <intent-filter>
+                <action android:name="android.intent.action.MAIN" />
+                <category android:name="android.intent.category.LAUNCHER" />
+            </intent-filter>
+        </activity>
+
+        <activity android:name=".StkLauncherActivity"
+            android:theme="@android:style/Theme.NoTitleBar"
+            android:configChanges="orientation"
+            android:label="@string/app_name"
+            android:exported="true"
+            android:taskAffinity="android.task.stk.task">
+            <intent-filter>
+                 <action android:name="android.intent.action.VIEW" />
+                 <action android:name="android.intent.action.PICK" />
+                 <category android:name="android.intent.category.DEFAULT" />
+            </intent-filter>
+        </activity>
+
+        <activity android:name=".StkMenuActivity"
+            android:theme="@android:style/Theme.NoTitleBar"
+            android:icon="@drawable/ic_launcher_sim_toolkit"
+            android:label="@string/app_name"
+            android:configChanges="orientation|locale|screenSize|layoutDirection|keyboardHidden|mnc|mcc"
+            android:exported="false"
+            android:taskAffinity="android.task.stk.task">
+             <intent-filter>
+                 <action android:name="android.intent.action.VIEW" />
+                 <action android:name="android.intent.action.PICK" />
+                 <category android:name="android.intent.category.DEFAULT" />
+             </intent-filter>
+         </activity>
+
+         <activity android:name=".StkInputActivity"
+            android:label="@string/app_name"
+            android:icon="@drawable/ic_launcher_sim_toolkit"
+            android:theme="@android:style/Theme.Holo"
+            android:configChanges="orientation|locale|screenSize|keyboardHidden|layoutDirection"
+            android:exported="false"
+            android:taskAffinity="android.task.stk.task">
+            <intent-filter>
+                <action android:name="android.intent.action.VIEW" />
+                <action android:name="android.intent.action.EDIT" />
+                <category android:name="android.intent.category.DEFAULT" />
+            </intent-filter>
+        </activity>
+
+        <activity android:name=".StkDialogActivity"
+            android:directBootAware="true"
+            android:configChanges="orientation|locale|screenSize|mcc|mnc|touchscreen|keyboard|keyboardHidden|navigation|screenLayout|fontScale|uiMode|smallestScreenSize|layoutDirection"
+            android:theme="@android:style/Theme.Holo.Dialog"
+            android:exported="false"
+            android:taskAffinity="android.task.stk.task">
+        </activity>
+
+        <activity android:name=".ToneDialog"
+            android:exported="false"
+            android:theme="@android:style/Theme.Holo.Dialog"
+            android:configChanges="orientation|locale|screenSize|layoutDirection" >
+        </activity>
+
+        <receiver android:name="com.android.stk.StkCmdReceiver"
+            android:directBootAware="true">
+            <intent-filter>
+                <action android:name= "android.intent.action.stk.command" />
+                <action android:name= "android.intent.action.stk.session_end" />
+                <action android:name= "android.intent.action.stk.icc_status_change" />
+                <action android:name= "android.intent.action.stk.alpha_notify" />
+            </intent-filter>
+        </receiver>
+
+        <receiver android:name="com.android.stk.EventReceiver"
+            android:directBootAware="true">
+            <intent-filter>
+                <action android:name="android.intent.action.stk.USER_ACTIVITY" />
+                <action android:name="android.intent.action.LOCALE_CHANGED" />
+                <action android:name="android.intent.action.stk.BROWSER_TERMINATION" />
+            </intent-filter>
+        </receiver>
+        <receiver android:name="com.android.stk.BootCompletedReceiver"
+            android:directBootAware="true">
+            <intent-filter>
+                <action android:name="android.intent.action.BOOT_COMPLETED" />
+                <action android:name="android.intent.action.SIM_STATE_CHANGED" />
+                <action android:name="android.intent.action.RADIO_TECHNOLOGY" />
+                <action android:name="android.intent.action.USER_INITIALIZE" />
+            </intent-filter>
+        </receiver>
+
+        <service android:name="StkAppService"
+                android:directBootAware="true"/>
+
+    </application>
+</manifest>
Index: vendor/mediatek/proprietary/packages/apps/Stk/res/values/strings.xml
===================================================================
--- vendor/mediatek/proprietary/packages/apps/Stk/res/values/strings.xml	(revision 3696)
+++ vendor/mediatek/proprietary/packages/apps/Stk/res/values/strings.xml	(revision 3697)
@@ -17,6 +17,7 @@
 <resources xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
     <!-- Default Application label used on home screen with an icon -->
+    <string name="app_name_telcel">SIM Telcel</string>
     <string name="app_name">SIM Toolkit</string>
     <string name="appI_name">SIM1 Toolkit</string>
     <string name="appII_name">SIM2 Toolkit</string>
